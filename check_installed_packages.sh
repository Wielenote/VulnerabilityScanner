#!/bin/bash

pass=$1
name=$2
ip=$3
port=${4:-22}
_pwd=$(pwd)
#
remote_home="$(sshpass -p "$pass" ssh -o "StrictHostKeyChecking=no" $name@$ip echo '$HOME')"

sshpass -p "$pass" ssh -o "StrictHostKeyChecking=no" $name@$ip rm -rf $remote_home/$_pwd/script_ZOS.sh
sshpass -p "$pass" scp -o "StrictHostKeyChecking=no" -P $port $_pwd/script_ZOS.sh $name@$ip:$remote_home/Documents/script_ZOS.sh
sshpass -p "$pass" ssh -o "StrictHostKeyChecking=no" $name@$ip chmod +x $remote_home/Documents/script_ZOS.sh
sshpass -p "$pass" ssh -o "StrictHostKeyChecking=no" $name@$ip $remote_home/Documents/script_ZOS.sh > $_pwd/script_result_ZOS.txt
